<krpano>
<style
        name="hotspot_style_linkedscene"
        crop="0|0|64|64" frame="0" lastframe="19" framewidth="64" frameheight="64"
        url="../viewer/skin/vtourskin_hotspot.png" scale="0.5" edge="top" distorted="true"
        onclick="skin_hotspotstyle_click();"
        onloaded="hotspot_animate()"
        onover.mouse="copy(layer[tooltip_title_scene].html, scene[get(linkedscene)].title);
             copy(layer[tooltip_image_scene].url, scene[get(linkedscene)].thumburl);
                  set(layer[scene_parent].visible, true);
                  tween(layer[tooltip_title_scene].alpha, 1.0, 0.1);
                  asyncloop(hovering, copy(layer[scene_parent].x,mouse.stagex); copy(layer[scene_parent].y,mouse.stagey); );"
        onout.mouse="tween(layer[tooltip_title_scene].alpha, 0.0, 0.1, default, set(layer[scene_parent].visible,false), copy(layer[scene_parent].x,mouse.stagex); copy(layer[scene_parent].y,mouse.stagey); );"
/>
<action name="hotspot_animate">
    inc(frame,1,get(lastframe),0);
    mul(ypos,frame,frameheight);
    txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight));
    delayedcall(0.1, if(loaded, hotspot_animate() ) );
</action>
<action name="skin_hotspotstyle_click" scope="local">
    if(caller.linkedscene,
    copy(hs_linkedscene, caller.linkedscene);
    if(caller.linkedscene_lookat, txtsplit(caller.linkedscene_lookat, ',', hs_lookat_h, hs_lookat_v, hs_lookat_fov);
    );
    set(caller.enabled, false);
    skin_hidetooltips();
    tween(caller.depth|caller.alpha|caller.oy|caller.rx, 4000|0.0|-50|-60, 0.5, default,
    skin_loadscene(get(hs_linkedscene), get(skin_settings.loadscene_blend));
    if(hs_lookat_h !== null, skin_lookat(get(hs_lookat_h), get(hs_lookat_v), get(hs_lookat_fov)); );
    skin_updatescroll();
    );
    );
</action>
<layer name="scene_parent" type="container" keep="true" align="lefttop" edge="bottom" x="0" y="0" oy="-5"
       width="140" height="120" bgcolor="0x000000" bgalpha="0.7" bgroundedge="5" visible="false">
    <layer name="tooltip_image_scene" type="image" url="" keep="false" align="lefttop" x="10" y="10" width="240"
           heigt="160" crop="0|40|240|160" scale="0.5"/>
    <layer name="tooltip_title_scene" keep="false"
           url="%SWFPATH%/plugins/textfield.swf"
           visible="true" alpha="0" enabled="false"
           align="lefttop" x="10" y="90" width="120" autoheight="true"
           background="false" backgroundcolor="0xFFFFFF" backgroundalpha="1.0"
           border="false" bordercolor="0x000000" borderalpha="1.0" borderwidth="1.0" roundedge="0"
           shadow="0.0" shadowrange="4.0" shadowangle="45" shadowcolor="0x000000" shadowalpha="1.0"
           textshadow="get:skin_settings.design_text_shadow" textshadowrange="6.0" textshadowangle="90"
           textshadowcolor="0x000000" textshadowalpha="1.0"
           css="color:#ffffff; font-family:Arial; text-align:left; font-size:12px;"
           html=""
    />
</layer>
<action name="skin_loadscene" scope="local" args="newscenenameorindex, blendmode">
    if(webvr.isenabled AND scene.count GT 1,
    set(hotspot[skin_webvr_prev_scene].visible, false);
    set(hotspot[skin_webvr_next_scene].visible, false);
    );

    calc(layer[skin_thumbborder].parent, 'skin_thumb_' + scene[get(newscenenameorindex)].index);
    layer[skin_thumbs].scrolltocenter(get(scene[get(newscenenameorindex)].thumbx),
    get(scene[get(newscenenameorindex)].thumby));
    loadscene(get(scene[get(newscenenameorindex)].name), null, get(skin_settings.loadscene_flags), get(blendmode));
</action>
<action name="hotspot_animate">
    inc(frame,1,get(lastframe),0);
    mul(ypos,frame,frameheight);
    txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight));
    delayedcall(0.1, if(loaded, hotspot_animate() ) );
</action>

<!-- text -->
<style
  name="hotspot_style_text"
  type="text"
  ath="0" atv="0" edge="center" distorted="true" renderer="webgl"
  css="font-family:Arial; font-size:16px; color:#000000;"
  vcenter="false"
  padding="2"
  wordwrap="true"
  bg="true"
  bgcolor="0xFFFFaF"
  bgborder="0.5"
  bgroundedge="0"
  bgshadow=""
  txtshadow=""
  mergedalpha="true"
  oversampling="1.0"
  mipmapping="false"
  onautosized=""
  width="100"
  height="100"
  bgalpha="0.7"
  onloaded="hotspot_style_text_action()"
/>
<action name="hotspot_style_text_action">
  txtadd(html,'[b]',get(hotspot_title),'[/b][br]',get(hotspot_content));
</action>

<!-- Tooltip -->
<style 
  name="hotspot_style_tooltip"
  url="../viewer/skin/images/tooltip.png" 
  frame="0"
  lastframe="19"
  framewidth="64"
  frameheight="64"
  distorted="true"
  onover.mouse="copy(layer[tooltip_title_scene].html, scene[get(linkedscene)].title);
                 copy(layer[tooltip_image_scene].url, scene[get(linkedscene)].thumburl);
                 set(layer[tooltip_parent].visible, true);
                 tween(layer[tooltip_title_scene].alpha, 1.0, 0.1);
                 asyncloop(hovering, copy(layer[tooltip_parent].x,mouse.stagex); copy(layer[tooltip_parent].y,mouse.stagey););"
  onout.mouse="tween(layer[tooltip_title_scene].alpha, 0.0, 0.1, default, set(layer[tooltip_parent].visible,false), copy(layer[tooltip_parent].x,mouse.stagex); copy(layer[tooltip_parent].y,mouse.stagey); );"
  onloaded="text_load_action"
/>

<layer name="tooltip_parent" type="container" keep="true" align="lefttop" edge="bottom" x="0" y="0" oy="-5"
       width="140" height="120" bgcolor="0x000000" bgalpha="0.7" bgroundedge="5" visible="false">
    <layer name="tooltip_image_scene" type="image" url="" keep="false" align="lefttop" x="10" y="10" width="240"
           heigt="160" crop="0|40|240|160" scale="0.5" />
    <layer name="tooltip_title_scene" keep="false"
           url="%SWFPATH%/plugins/textfield.swf"
           visible="true" alpha="0" enabled="false"
           align="lefttop" x="10" y="90" width="120" autoheight="true"
           background="false" backgroundcolor="0xFFFFFF" backgroundalpha="1.0"
           border="false" bordercolor="0x000000" borderalpha="1.0" borderwidth="1.0" roundedge="0"
           shadow="0.0" shadowrange="4.0" shadowangle="45" shadowcolor="0x000000" shadowalpha="1.0"
           textshadow="get:skin_settings.design_text_shadow" textshadowrange="6.0" textshadowangle="90"
           textshadowcolor="0x000000" textshadowalpha="1.0"
           css="color:#ffffff; font-family:Arial; text-align:left; font-size:5px;"
           html="" />
    <layer name="tooltip_text"
               type="text"
               align="lefttop"
               css="font-family:Arial; font-size:16px; color:white;"
               vcenter="false"
               padding="2"
               wordwrap="true"
               bg="true"
               bgcolor=""
               bgalpha="1.0"
               bgborder="0"
               bgroundedge="0"
               bgshadow=""
               txtshadow=""
               mergedalpha="true"
               interactivecontent="false"
               onautosized=""
               width="140"
               height="120"
               oy="-5"  />
    </layer>
<action name="text_load_action">
  txtadd(layer[tooltip_text].html,get(tooltip_title),'[br]',get(tooltip_content));
</action>

<!-- Modal -->
<style name="hotspot_style_modal" onclick="modal_action" url="../viewer/skin/images/modal.png" scale="0.8" />
<action name="modal_action">
    set(layer[overlay_modal].visible, true);
    txtadd(layer[modal_popup].html,'[h4]',get(modal_title),'[/h4][br][h3]',get(modal_content),'[/h3]');
    <!-- layer[modal_popup].html,'[h4]',get(modal_title),'[br]',get(modal_content),''; -->
</action>
<action name="modal_layer_hide">
    set(layer[overlay_modal].visible, false);
    <!-- layer[modal_popup].html,'[h4]',get(modal_title),'[br]',get(modal_content),''; -->
</action>
<layer name="overlay_modal" type="container" keep="true" align="lefttop" width="100%" height="100%" x="0" y="0"
           bgcolor="0x000000" bgalpha="0.5" zorder="10" bgcapture="true" visible="false" onclick="modal_layer_hide();">
    <layer name="parent_modal_layer" type="container" keep="true" align="center" width="500" height="250" x="0" y="0"
           bgcolor="0xFFFFFF" bgalpha="1.0" zorder="11">
        <layer name="close_modal_layer" url="../viewer/skin/fancybox_sprite.png" keep="true" align="righttop" x="-13" y="-13"
               onclick="modal_layer_hide();" crop="0|0|36|36" zorder="15"/>
        <layer
          name="modal_popup"
          type="text"
          keep="true"
          align="topleft"
          x="5"
          y="0"
          visible="true"
        />
    </layer>
</layer>

<!-- video -->
<style
  name="hotspot_style_video"
  onclick="video_action"
  url="../viewer/skin/images/video.png"
/>

<action name="video_action">
  set(layer[overlay_video].visible, true);
  txtadd(layer[video_iframe].html,"[iframe width='560' height='315' src=",get(video_url), ' ',frameborder='0' gesture='media' allow='encrypted-media' allowfullscreen][/iframe]")
</action> 
<action name="video_action_hide">
  set(layer[overlay_video].visible, false);
</action>
<layer name="overlay_video" type="container" keep="true" align="lefttop" width="100%" height="100%" x="0" y="0"
           bgcolor="0x000000" bgalpha="0.5" zorder="10" bgcapture="true" visible="false" onclick="video_layer_hide();">
    <layer name="parent_video_popup" type="container" keep="true" align="center" width="560" height="315" x="0" y="0"
           bgcolor="" bgalpha="1.0" zorder="11" bgborder="0">
        <layer name="close_video_layer" url="../viewer/skin/fancybox_sprite.png" keep="true" align="righttop" x="-13" y="-13"
               onclick="video_action_hide();" crop="0|0|36|36" zorder="15"/>
        <layer name="video_iframe"
           type="text"
           align="lefttop" x="0" y="0"
           vcenter="false"
           wordwrap="true"
           bg="true"
           bgalpha="1.0"
           bgborder="0"
           bgroundedge="0"
           bgshadow=""
           txtshadow=""
           mergedalpha="true"
           interactivecontent="false"
           onautosized=""
          > 
        </layer>
    </layer>
</layer>


<!-- Image -->
<style
  name="hotspot_style_image "
  width="50"
  height="50"
  url="../viewer/skin/images/image.png"
  align="lefttop" edge="bottom" x="0" y="0"
  onclick="image_action"
/>

<action name="image_action">
  set(layer[overlay_image].visible, true);
  set(layer[img_popup].url, get(image_url));
  txtadd(layer[img_popup].html,"[img width='560' height='315' src=", get(image_url), "/]")
</action>

<action name="image_layer_hide">
  set(layer[overlay_image].visible, false);
</action>

<layer name="overlay_image" type="container" keep="true" align="lefttop" width="100%" height="100%" x="0" y="0"
       bgcolor="0x000000" bgalpha="0.5" zorder="10" bgcapture="true" visible="false" onclick="image_layer_hide();">
    <layer type="text" name="img_popup" keep="true"  align="center"
      x="0"
      y="10"
      css="width: 500px; height: 500px; max-width: 500px; max-height: 500px; background-size: 100%; background-repeat: no-repeat;"
      visible="true"
      autoheight="true"
      background="false"
      border="false"
      enabled="false"
    >
    <layer name="close_image_layer" url="../viewer/skin/fancybox_sprite.png" keep="true" align="righttop" x="-13" y="-13"
           onclick="image_layer_hide();" crop="0|0|36|36" zorder="15"/>
    </layer>
</layer>
</krpano>